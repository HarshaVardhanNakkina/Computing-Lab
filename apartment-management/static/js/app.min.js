"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}$("#login-form").submit(function(t){console.log("YAY LOGIN SUBMITTED"),t.preventDefault();var e=$("#login-btn");e.prop("disabled",!0);var n=$(this).serializeArray().reduce(function(t,e){return _objectSpread({},t,_defineProperty({},e.name,e.value))},{}),r=$(this).attr("action");$.post(r,n,function(t){var e=t.firstTimeLogin;t.role;console.log(e),e?window.location.replace(window.location.origin+"/users/profile/edit"):window.location.replace(window.location.origin)}).fail(function(t){var e=t.responseJSON.message;$(".update-success-fail").append("\n\t\t\t\t<div class='alert alert-danger alert-dismissible text-center fade show' role='alert'>\n\t\t\t\t\t".concat(e,"\n\t\t\t\t<button type='button' class='close' data-dismiss='alert' aria-label='Close'>\n\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t"))}).always(function(){e.prop("disabled",!1)})}),$("#logout-btn").mouseup(function(t){t.preventDefault(),console.log("USER WANTS TO LOGOUT"),document.cookie="jwt_cookie=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.replace(window.location.origin)}),$("#register-form").submit(function(t){t.preventDefault();var e=$("#register-btn");e.prop("disabled",!0);var n=$(this).attr("action");console.log(n);var r=$(this).serializeArray().reduce(function(t,e){return _objectSpread({},t,_defineProperty({},e.name,e.value))},{});$.post(n,r,function(t){var e=t._userId;window.location.replace(window.location.origin+"/users/confirmotp/".concat(e))}).fail(function(t){t.responseJSON.length&&t.responseJSON.forEach(function(t){$(".update-success-fail").append("\n\t\t\t\t\t\t<div class='alert alert-danger alert-dismissible text-center fade show' role='alert'>\n\t\t\t\t\t\t\t".concat(t.msg,"\n\t\t\t\t\t\t<button type='button' class='close' data-dismiss='alert' aria-label='Close'>\n\t\t\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"))})}).always(function(){e.prop("disabled",!1)})}),$("#resend-otp").click(function(){var t=this;$(this).prop("disabled",!0);var e=$(this).data("user_id");$.post("/users/confirmotp/resend-otp/".concat(e),function(){console.log("resend success")}).done(function(){$(".resend-success-fail").append('\n\t\t\t<div class="alert alert-success alert-dismissible fade show" role="alert">\n\t\t\tresend success. check your mail again.\n\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n\t\t\t\t\t<span aria-hidden="true">&times;</span>\n\t\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t')}).always(function(){$(t).prop("disabled",!1)})}),$("#resend-setup-link").click(function(){var t=this;$(this).prop("disabled",!0);var e=$(this).data("user_id");$.post("/users/confirmotp/resend-link/".concat(e),function(){console.log("resend success")}).done(function(){$(".resend-success-fail").append('\n\t\t\t<div class="alert alert-success alert-dismissible fade show" role="alert">\n\t\t\tresend success. check your mail again.\n\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n\t\t\t\t\t<span aria-hidden="true">&times;</span>\n\t\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t')}).always(function(){$(t).prop("disabled",!1)})}),$("#tenant-details-form").submit(function(t){console.log("TENANT IS UPDATING"),t.preventDefault();var e=$("update-tenant-btn");e.prop("disabled",!0);var n=$(this).attr("action"),r=$(this).serializeArray().reduce(function(t,e){return _objectSpread({},t,_defineProperty({},e.name,e.value))},{});console.log(r,n),$.post(n,r,function(){}).done(function(){$(".update-success-fail").append("\n\t\t\t\t<div class='alert alert-success alert-dismissible text-center fade show' role='alert'>\n\t\t\t\t\tUpdated successfully.\n\t\t\t\t<button type='button' class='close' data-dismiss='alert' aria-label='Close'>\n\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t")}).fail(function(){$(".update-success-fail").append("\n\t\t\t\t<div class='alert alert-success alert-dismissible text-center fade show' role='alert'>\n\t\t\t\t\tInternal Server Error. Please try again.\n\t\t\t\t<button type='button' class='close' data-dismiss='alert' aria-label='Close'>\n\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t")}).always(function(){$("html, body").animate({scrollTop:0},800,function(){}),e.prop("disabled",!1)})});